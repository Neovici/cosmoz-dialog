<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="cosmoz-dialog-behavior.html">

<!--
`<cosmoz-form-dialog>`
@demo demo/form-dialog.html Dialog Demo
-->
<dom-module id="cosmoz-form-dialog">
	<template>
		<div hidden>
			<slot></slot>
		</div>
	</template>
	<script>
		(function () {

			Polymer({

				is: 'cosmoz-form-dialog',

				behaviors: [
					Cosmoz.DialogBehavior
				],

				_form: null,

				created() {
					this._spawnSteps.push(this._createForm);
				},

				get form() {
					return this._form;
				},

				_detachDialog() {
					if (this._form !== null && this._form.parentNode) {
						Polymer.dom(this._form.parentNode).removeChild(this._form);
					}
				},

				_attachDialog() {
					if (!this._form.parentNode) {
						Polymer.dom(document.body).appendChild(this._form);
					}
				},

				_createForm() {
					if (!this._paperDialog) {
						return;
					}
					const ironForm = document.createElement('iron-form'),
						form = document.createElement('form');

					Polymer.dom(ironForm).appendChild(form);
					Polymer.dom(form).appendChild(this._paperDialog);
					this._form = ironForm;
				}
			});

		})();

	</script>
</dom-module>
